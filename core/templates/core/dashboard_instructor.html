<!-- core/templates/core/dashboard_instructor.html -->
{% extends 'base.html' %}

{% block title %}Instructor Dashboard{% endblock %}

{% block content %}
<div class="container mx-auto p-8 mt-8 bg-white rounded-lg shadow-xl">
    <h1 class="text-3xl font-bold text-indigo-700 mb-6">Instructor Dashboard</h1>
    <p class="text-gray-700 mb-4">Manage your courses, view student progress, and grade submissions.</p>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- My Courses Card -->
        <div class="bg-purple-50 p-6 rounded-lg shadow-md border border-purple-200">
            <h2 class="text-xl font-semibold text-purple-800 mb-3">My Courses</h2>
            {% if taught_courses %}
                <p class="text-gray-600">You are teaching <span class="font-bold">{{ taught_courses.count }}</span> course{{ taught_courses.count|pluralize }}.</p>
                <ul class="list-disc list-inside text-gray-600 mt-2 space-y-1">
                    {% for course in taught_courses %}
                        <li>
                            <a href="{% url 'core:course_detail' pk=course.pk %}" class="text-purple-700 hover:underline">
                                {{ course.title }}
                            </a>
                            {% if course.total_students %}
                                ({{ course.total_students }} Student{{ course.total_students|pluralize }})
                            {% else %}
                                (No students enrolled yet)
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
                <a href="{% url 'core:course_list' %}" class="text-purple-600 hover:underline mt-4 block">View All Courses &rarr;</a>
                <a href="{% url 'core:course_create' %}" class="text-purple-600 hover:underline mt-2 block">Create New Course &rarr;</a>
            {% else %}
                <p class="text-gray-600">You are not currently assigned to teach any courses.</p>
                <a href="{% url 'core:course_create' %}" class="text-purple-600 hover:underline mt-4 block">Create Your First Course &rarr;</a>
            {% endif %}
        </div>

        <!-- Pending Submissions Card -->
        <div class="bg-red-50 p-6 rounded-lg shadow-md border border-red-200">
            <h2 class="text-xl font-semibold text-red-800 mb-3">Pending Submissions</h2>
            {% if pending_submissions %}
                <p class="text-gray-600">You have <span class="font-bold">{{ pending_submissions.count }}</span> submission{{ pending_submissions.count|pluralize }} to grade.</p>
                <ul class="list-disc list-inside text-gray-600 mt-2 space-y-1">
                    {% for submission in pending_submissions %}
                        <li>
                            {{ submission.assessment.title }} by {{ submission.student.username }}
                             <span class="text-sm text-gray-500">(Course: {{ submission.assessment.course.title }})</span>
                        </li>
                    {% endfor %}
                </ul>
                <a href="#" class="text-red-600 hover:underline mt-4 block">Grade Submissions &rarr;</a>
            {% else %}
                <p class="text-gray-600">No pending submissions at the moment. Great job!</p>
            {% endif %}
        </div>

        <!-- Course Analytics Card -->
        <div class="bg-teal-50 p-6 rounded-lg shadow-md border border-teal-200">
            <h2 class="text-xl font-semibold text-teal-800 mb-3">Course Analytics</h2>
            <p class="text-gray-600">
                Total active courses you teach: <span class="font-bold">{{ total_active_courses }}</span>
            </p>
            <p class="text-gray-600">
                Total unique students across your courses: <span class="font-bold">{{ total_students_across_courses }}</span>
            </p>
            <ul class="list-disc list-inside text-gray-600 mt-2">
                <li>(More detailed analytics coming soon)</li>
            </ul>
            <a href="#" class="text-teal-600 hover:underline mt-4 block">View Detailed Analytics &rarr;</a>
        </div>
    </div>

    <p class="text-center text-gray-500 mt-10 text-sm">
        Instructor dashboard with dynamic course and submission data.
    </p>
</div>
{% endblock %}